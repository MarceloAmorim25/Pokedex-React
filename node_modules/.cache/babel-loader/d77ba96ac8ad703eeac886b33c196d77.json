{"ast":null,"code":"import _regeneratorRuntime from\"/home/tekuan/Documentos/Pokedex-React/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tekuan/Documentos/Pokedex-React/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tekuan/Documentos/Pokedex-React/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import axios from'axios';import'./style.css';export default function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),usuario=_useState2[0],setUsuario=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var history=useHistory();React.useEffect(function(){if(usuario.length!==0){axios.get(\"https://pokedex20201.herokuapp.com/users/\".concat(usuario)).then(function(res){setData(res.data.user.username);}).catch(function(error){console.log(error);});}},[usuario]);localStorage.setItem('usuario',usuario);function handleLogin(_x){return _handleLogin.apply(this,arguments);}function _handleLogin(){_handleLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(usuario===data)){_context.next=6;break;}history.push('/home');alert('Login autorizado...');_context.next=8;break;case 6:_context.next=8;return axios.post('https://pokedex20201.herokuapp.com/users',{username:usuario}).then(function(res){console.log(res);alert('Novo usu치rio criado!');history.push('/home');}).catch(function(error){console.log(error);alert('Falha no login, tente novamente.');});case 8:case\"end\":return _context.stop();}}},_callee);}));return _handleLogin.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{className:\"box-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"box\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleLogin},/*#__PURE__*/React.createElement(\"h1\",null,\"P\\xE1gina de Login\"),/*#__PURE__*/React.createElement(\"label\",null,\"Usu\\xE1rio:\"),/*#__PURE__*/React.createElement(\"input\",{id:\"input\",type:\"text\",placeholder:\"Login\",value:usuario,onChange:function onChange(e){return setUsuario(e.target.value);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Entrar\"))));}","map":{"version":3,"sources":["/home/tekuan/Documentos/Pokedex-React/src/pages/Login/index.js"],"names":["React","useState","useHistory","axios","Login","usuario","setUsuario","data","setData","history","useEffect","length","get","then","res","user","username","catch","error","console","log","localStorage","setItem","handleLogin","e","preventDefault","push","alert","post","target","value"],"mappings":"qWAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,aAAP,CAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,eAGCH,QAAQ,CAAC,EAAD,CAHT,wCAGtBI,OAHsB,eAGbC,UAHa,8BAILL,QAAQ,CAAC,EAAD,CAJH,yCAItBM,IAJsB,eAIhBC,OAJgB,eAK5B,GAAMC,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CAGAF,KAAK,CAACU,SAAN,CAAgB,UAAM,CAEpB,GAAGL,OAAO,CAACM,MAAR,GAAmB,CAAtB,CAAwB,CAEtBR,KAAK,CACFS,GADH,oDACmDP,OADnD,GAEGQ,IAFH,CAEQ,SAACC,GAAD,CAAS,CACbN,OAAO,CAACM,GAAG,CAACP,IAAJ,CAASQ,IAAT,CAAcC,QAAf,CAAP,CACD,CAJH,EAKGC,KALH,CAKS,SAASC,KAAT,CAAgB,CACrBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAPH,EASD,CAEH,CAfA,CAeE,CAACb,OAAD,CAfF,EAiBDgB,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAgCjB,OAAhC,EAzB6B,QA2BdkB,CAAAA,WA3Bc,6IA2B7B,iBAA2BC,CAA3B,kHAEKA,CAAC,CAACC,cAAF,GAFL,KAIQpB,OAAO,GAAKE,IAJpB,0BAMOE,OAAO,CAACiB,IAAR,CAAa,OAAb,EACAC,KAAK,CAAC,qBAAD,CAAL,CAPP,mDAUexB,CAAAA,KAAK,CACRyB,IADG,CACE,0CADF,CAC8C,CAChDZ,QAAQ,CAAEX,OADsC,CAD9C,EAIHQ,IAJG,CAIE,SAACC,GAAD,CAAS,CACbK,OAAO,CAACC,GAAR,CAAYN,GAAZ,EACAa,KAAK,CAAC,sBAAD,CAAL,CACAlB,OAAO,CAACiB,IAAR,CAAa,OAAb,EACD,CARG,EASHT,KATG,CASG,SAAUC,KAAV,CAAiB,CACtBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACAS,KAAK,CAAC,kCAAD,CAAL,CACD,CAZG,CAVf,uDA3B6B,8CAqD5B,mBAEI,2BAAK,SAAS,CAAC,eAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACI,4BAAO,QAAQ,CAAEJ,WAAjB,eAEI,mDAFJ,cAII,+CAJJ,cAMI,6BACI,EAAE,CAAC,OADP,CAEI,IAAI,CAAC,MAFT,CAGI,WAAW,CAAC,OAHhB,CAII,KAAK,CAAElB,OAJX,CAKI,QAAQ,CAAE,kBAAAmB,CAAC,QAAIlB,CAAAA,UAAU,CAACkB,CAAC,CAACK,MAAF,CAASC,KAAV,CAAd,EALf,EANJ,cAcI,8BAdJ,cAgBI,8BAAQ,IAAI,CAAC,QAAb,WAhBJ,CADJ,CADF,CAFJ,CA2BH","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport './style.css';\n\nexport default function Login() {\n\n    \n    const[usuario, setUsuario] = useState('');\n    const[data, setData] = useState([]);\n    const history = useHistory(); \n    \n    \n    React.useEffect(() => {\n\n      if(usuario.length !== 0){\n\n        axios\n          .get(`https://pokedex20201.herokuapp.com/users/${usuario}`)\n          .then((res) => {\n            setData(res.data.user.username)\n          })\n          .catch(function(error) {\n            console.log(error);\n          })\n\n      }\n\n   }, [usuario])\n\n   localStorage.setItem('usuario', usuario);\n\n   async function handleLogin(e) { \n     \n        e.preventDefault();\n                       \n        if(usuario === data) {\n\n          history.push('/home');\n          alert('Login autorizado...');\n\n        }else {\n            await axios\n              .post('https://pokedex20201.herokuapp.com/users', {\n                username: usuario\n              })\n              .then((res) => {\n                console.log(res);\n                alert('Novo usu치rio criado!');\n                history.push('/home');                \n              })\n              .catch(function (error) {\n                console.log(error);\n                alert('Falha no login, tente novamente.');\n              });\n        }\n    }\n\n    return(\n\n        <div className=\"box-container\">\n          <div className=\"box\">\n              <form  onSubmit={handleLogin}>\n\n                  <h1>P치gina de Login</h1>\n\n                  <label>Usu치rio:</label>\n\n                  <input\n                      id=\"input\"\n                      type=\"text\"\n                      placeholder=\"Login\" \n                      value={usuario}\n                      onChange={e => setUsuario(e.target.value)}\n                  />\n\n                  <br />\n      \n                  <button type=\"submit\">Entrar</button>\n\n              </form>\n            </div>\n        </div>\n\n    );\n}\n\n\n"]},"metadata":{},"sourceType":"module"}